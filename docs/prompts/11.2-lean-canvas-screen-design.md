# Core Prompt 41 — Lean Canvas Screen Design

**Purpose:** Define the luxury, premium Lean Canvas screen with wireframe, content, data, features, and AI agent interactions  
**Focus:** Business model canvas visualization with AI pre-fill and hypothesis validation  
**Status:** Phase 3 - Advanced Features

---

## Screen Purpose

**Business Model Visualization**

The Lean Canvas screen provides founders with an intelligent, sophisticated way to visualize and validate their business model using the standard 9-box Lean Canvas framework. The screen enables AI-powered pre-filling from the startup profile, real-time hypothesis validation, and version tracking for iterative refinement.

---

## Visual Design

### Luxury Premium Aesthetic

**Sophisticated Canvas Design**
- Clean, minimalist 9-box grid layout
- Premium typography with clear hierarchy
- Subtle borders and shadows for depth
- Professional color coding for validation states
- Polished animations for box interactions

**Intelligent Business Model Architecture**
- Most critical boxes emphasized visually
- Progressive disclosure of detailed information
- Contextual validation indicators
- Clear visual flow from top-left to bottom-right
- Smart pre-fill from startup profile

---

## Wireframe Structure

### Left Panel: Context

**Navigation Menu**
- Dashboard, Projects, Deals, Contacts, Tasks, Discovery, Documents, **Lean Canvas**, GTM Strategy

**Canvas Controls**
- "Pre-fill from Profile" button
- "Validate Hypotheses" button
- "Compare Versions" button
- Version selector dropdown
- Export options (PDF, PNG)

**Current Canvas Status**
- Completion percentage (9/9 boxes)
- Last updated timestamp
- Validation status (All valid, Warnings present, Errors detected)

**Quick Stats**
- Number of versions saved
- Total iterations
- Days since last update
- Hypothesis validation score

---

## Main Panel: Work

### 9-Box Canvas Grid

**Top Row (Left to Right):**

**Box 1: Problem**
- Title: "Problem"
- Content: List of top 3 customer problems
- Edit icon in top-right
- Validation badge (✓ Valid, ⚠️ Warning, ❌ Error)
- Click to expand edit modal

**Box 2: Solution**
- Title: "Solution"
- Content: List of key features addressing problems
- Edit icon, validation badge
- Click to expand edit modal

**Box 3: Unique Value Proposition**
- Title: "Unique Value Proposition"
- Content: Single-sentence value prop
- Edit icon, validation badge
- Click to expand edit modal

**Box 4: Unfair Advantage**
- Title: "Unfair Advantage"
- Content: List of defensible advantages
- Edit icon, validation badge
- Click to expand edit modal

**Box 5: Customer Segments**
- Title: "Customer Segments"
- Content: List of target customer types
- Edit icon, validation badge
- Click to expand edit modal

**Bottom Row (Left to Right):**

**Box 6: Key Metrics**
- Title: "Key Metrics"
- Content: List of success metrics
- Edit icon, validation badge
- Click to expand edit modal

**Box 7: Channels**
- Title: "Channels"
- Content: List of customer acquisition channels
- Edit icon, validation badge
- Click to expand edit modal

**Box 8: Cost Structure**
- Title: "Cost Structure"
- Content: List of major cost categories
- Edit icon, validation badge
- Click to expand edit modal

**Box 9: Revenue Streams**
- Title: "Revenue Streams"
- Content: List of revenue sources
- Edit icon, validation badge
- Click to expand edit modal

**Box Design Specifications**
- Each box is a card with subtle shadow
- Title at top with icon
- Content area (text or bullets)
- Edit icon in top-right corner
- Validation badge (color-coded)
- Hover effect for interactivity
- Click to expand full edit modal

---

## Right Panel: Intelligence

### AI Pre-fill Panel

**Pre-fill Status**
- Loading state during pre-fill
- Success state with extracted data
- Error state with manual entry option
- Progress indicator showing boxes filled

**Pre-filled Suggestions**
- Extracted data for each box
- Source indicators (from profile, from wizard)
- Apply all button
- Apply individual box buttons
- Manual override always available

### Hypothesis Validation Panel

**Validation Results**
- Overall validation score (0-100)
- Count of valid boxes, warnings, errors
- List of validation challenges
- Brief challenge descriptions
- Click to view detailed reasoning

**Challenge Details**
- Weak hypothesis identified
- Reasoning for challenge
- Suggestions for improvement
- Examples of stronger hypotheses
- Accept risk or revise option

### Version Comparison Panel

**Version Selector**
- Dropdown with all saved versions
- Version metadata (date, changes count)
- Side-by-side comparison view
- Change highlights (added, removed, modified)
- Restore version button

---

## Content Specifications

### Canvas Box Content

**Problem Box**
- List of top 3 customer problems
- Problem priority (1, 2, 3)
- Problem impact description
- Current solution status

**Solution Box**
- List of key features addressing problems
- Feature priority (must-have, nice-to-have)
- Feature complexity (simple, complex)
- Implementation status

**Unique Value Proposition Box**
- Single-sentence value prop
- Target customer reference
- Key benefit highlighted
- Differentiation statement

**Unfair Advantage Box**
- List of defensible advantages
- Advantage type (network, data, IP, brand)
- Moat strength (weak, medium, strong)
- Sustainability assessment

**Customer Segments Box**
- List of target customer types
- Segment size estimate
- Segment priority (primary, secondary)
- Customer persona links

**Key Metrics Box**
- List of success metrics
- Metric type (acquisition, activation, retention, revenue)
- Target values
- Current values (if available)

**Channels Box**
- List of customer acquisition channels
- Channel priority (primary, secondary, experimental)
- Channel effectiveness (high, medium, low)
- Channel cost (high, medium, low)

**Cost Structure Box**
- List of major cost categories
- Cost type (fixed, variable)
- Monthly cost estimate
- Cost priority (critical, optional)

**Revenue Streams Box**
- List of revenue sources
- Revenue model (subscription, transaction, advertising)
- Revenue estimate
- Revenue priority (primary, secondary)

---

## Features

### Canvas Pre-fill

**AI Pre-fill from Profile**
- Extract data from startup profile using ProfileExtractor
- Map profile fields to canvas boxes
- Generate intelligent suggestions for empty boxes
- Show preview before applying
- User approval required before saving

**Pre-fill Mapping**
- Profile problem → Problem box
- Profile solution → Solution box
- Profile tagline → Unique Value Proposition box
- Profile moat → Unfair Advantage box
- Profile target customer → Customer Segments box
- Profile metrics → Key Metrics box
- Profile channels → Channels box
- Profile costs → Cost Structure box
- Profile revenue model → Revenue Streams box

### Hypothesis Validation

**AI Validation Engine**
- Analyze all 9 boxes using InsightsExtractor
- Identify weak hypotheses (e.g., "AI" in Unfair Advantage)
- Generate challenges with reasoning
- Provide improvement suggestions
- Display validation warnings on boxes

**Validation Rules**
- Problem must be specific (not generic)
- Solution must address listed problems
- Unique Value Proposition must be unique
- Unfair Advantage must be defensible
- Customer Segments must be specific
- Key Metrics must be measurable
- Channels must be appropriate for stage
- Cost Structure must be realistic
- Revenue Streams must be viable

### Box Editing

**Edit Modal**
- Large modal overlay with box editor
- Template prompts for each box type
- Large textarea for content entry
- AI suggestion box below content
- Character count indicator
- Save and Cancel buttons

**Inline Editing** (Future)
- Click box to edit inline
- Auto-save on blur
- Undo/redo support
- Change tracking

### Version Management

**Version Creation**
- Save current canvas as new version
- Version metadata (date, name, changes count)
- Version comparison view
- Restore previous version
- Delete old versions

**Version Comparison**
- Side-by-side view of two versions
- Change highlights (added, removed, modified)
- Summary of changes (boxes changed, pivots detected)
- Annotations timeline showing major changes
- Restore button for each version

---

## AI Agent Integration

### ProfileExtractor + WorkflowCoordinator

**Pre-fill Workflow**
- Extract startup data from profile
- Map profile fields to canvas boxes
- Generate suggestions for missing boxes
- Validate extracted data
- Display suggestions for user approval

**Integration Points**
- Edge function: `wizard_extract_startup` (for profile data)
- Edge function: `coordinate_workflow` (for multi-step pre-fill)
- Model: gemini-3-flash-preview (fast extraction)
- Features: Structured Output, URL Context

### InsightsExtractor

**Hypothesis Validation**
- Analyze all 9 boxes for weak hypotheses
- Generate validation challenges
- Provide improvement suggestions
- Score hypothesis strength (0-100)
- Display warnings on problematic boxes

**Integration Points**
- Edge function: `extract_insights` (for validation)
- Model: gemini-3-pro-preview (complex reasoning)
- Features: Thinking Mode, Google Search (for benchmarking)
- Structured Output for validation results

---

## User Journey

### First-Time Canvas Creation

**Workflow Steps:**
1. User opens Lean Canvas screen
2. Canvas is empty (all boxes blank)
3. User clicks "Pre-fill from Profile"
4. AI extracts data from startup profile
5. AI maps profile to canvas boxes
6. Right panel shows pre-filled suggestions
7. User reviews each box suggestion
8. User approves or edits suggestions
9. Canvas is populated with approved data
10. User clicks "Validate Hypotheses"
11. AI analyzes canvas for weak hypotheses
12. Right panel shows validation challenges
13. User reviews challenges and revises boxes
14. User saves canvas as version 1

**Approval Gates:**
- Pre-fill suggestions require user approval
- Canvas changes require save confirmation
- Version creation requires explicit action

### Iterative Canvas Refinement

**Workflow Steps:**
1. User opens Lean Canvas with existing version
2. User edits one or more boxes
3. User clicks "Validate Hypotheses"
4. AI re-analyzes canvas
5. Right panel shows updated validation challenges
6. User reviews and revises as needed
7. User saves as new version
8. User compares versions to see changes

---

## Data Specifications

### Canvas Data Structure

**Canvas Object**
- Canvas ID (UUID)
- Startup ID (foreign key)
- Version number (integer)
- Version name (string, optional)
- Created at (timestamp)
- Updated at (timestamp)
- Boxes data (JSON object)

**Boxes JSON Structure**
- problem: { problems: [], priorities: [] }
- solution: { features: [], priorities: [] }
- valueProp: { statement: string }
- unfairAdvantage: { advantages: [], types: [] }
- customerSegments: { segments: [], priorities: [] }
- keyMetrics: { metrics: [], targets: [] }
- channels: { channels: [], priorities: [] }
- costStructure: { costs: [], types: [] }
- revenueStreams: { streams: [], models: [] }

### Validation Results Structure

**Validation Object**
- Overall score (0-100)
- Valid boxes count (integer)
- Warning boxes count (integer)
- Error boxes count (integer)
- Challenges array (JSON array)

**Challenge Object**
- Box name (string)
- Challenge type (warning, error)
- Challenge message (string)
- Reasoning (string)
- Suggestions (array of strings)
- Examples (array of strings)

---

## Frontend/Backend Wiring

### Frontend Components Needed

**Canvas Component**
- 9-box grid layout component
- Individual box card component
- Edit modal component
- Validation badge component
- Version selector component

**AI Integration Components**
- Pre-fill panel component
- Validation panel component
- Version comparison component
- Loading states component

### Backend Services Needed

**Canvas Service**
- Get canvas by startup ID
- Save canvas version
- Compare canvas versions
- Delete canvas version

**AI Service**
- Pre-fill canvas from profile
- Validate canvas hypotheses
- Compare canvas versions

### Data Flow

**Pre-fill Flow:**
1. Frontend calls canvas service
2. Canvas service calls AI service
3. AI service calls ProfileExtractor edge function
4. Edge function extracts profile data
5. AI service maps data to canvas boxes
6. AI service returns suggestions
7. Canvas service returns suggestions to frontend
8. Frontend displays suggestions in right panel
9. User approves or edits
10. Frontend saves canvas via canvas service

**Validation Flow:**
1. Frontend calls canvas service
2. Canvas service calls AI service
3. AI service calls InsightsExtractor edge function
4. Edge function analyzes canvas boxes
5. Edge function generates validation challenges
6. AI service returns validation results
7. Canvas service returns results to frontend
8. Frontend displays validation in right panel

---

## UI Components

### Box Card Component

**Elements:**
- Box title with icon
- Content area (text or bullets)
- Edit icon button (top-right)
- Validation badge (top-left)
- Hover effect (subtle shadow increase)
- Click handler (opens edit modal)

**States:**
- Default (neutral background)
- Hover (slight shadow increase)
- Valid (green border, checkmark badge)
- Warning (yellow border, warning badge)
- Error (red border, error badge)
- Editing (highlighted border)

### Edit Modal Component

**Elements:**
- Modal overlay (backdrop blur)
- Modal header (box title, close button)
- Template prompts section
- Content textarea (large, autofocus)
- AI suggestion box (below content)
- Character count indicator
- Save and Cancel buttons

**States:**
- Default (empty content)
- With content (populated textarea)
- With AI suggestion (suggestion box visible)
- Saving (loading spinner on Save button)
- Saved (success message, auto-close)

### Validation Panel Component

**Elements:**
- Overall score card (large number, 0-100)
- Validation summary (valid/warning/error counts)
- Challenges list (scrollable)
- Challenge details (expandable)
- Refresh validation button

**States:**
- Loading (spinner, "Validating...")
- Results (score, summary, challenges)
- Error (error message, retry button)

---

## Error Handling

### Pre-fill Errors

**Profile Not Found**
- Display message: "Startup profile not found. Please complete the wizard first."
- Show link to wizard
- Disable pre-fill button

**Extraction Failure**
- Display message: "Unable to extract profile data. Please try again or fill manually."
- Show manual entry option
- Log error to monitoring

### Validation Errors

**Validation Failure**
- Display message: "Unable to validate hypotheses. Please try again."
- Show manual validation option
- Log error to monitoring

**Empty Canvas**
- Display message: "Canvas is empty. Use Pre-fill or fill manually."
- Show pre-fill button
- Show empty state illustration

---

## Responsive Design

### Desktop (≥1024px)
- 3-column grid layout (Left, Main, Right)
- 9-box canvas in main panel (3x3 grid)
- All panels visible simultaneously
- Full edit modal overlay

### Tablet (768px - 1023px)
- 3-column layout maintained
- Canvas boxes slightly smaller
- Edit modal full-screen
- Right panel slide-over

### Mobile (<768px)
- Single column layout
- Left panel hidden (hamburger menu)
- Canvas stacked vertically (9 boxes in column)
- Right panel bottom sheet
- Edit modal full-screen

---

## Best Practices

### Canvas Completion

**Guiding Principles:**
- Complete all 9 boxes before validation
- Use specific, measurable language
- Avoid generic statements
- Validate regularly (weekly recommended)
- Save versions after major changes

**AI Assistance:**
- Use pre-fill for initial population
- Review all AI suggestions carefully
- Edit AI suggestions to be more specific
- Use validation to identify weak areas
- Iterate based on validation feedback

---

## Next Steps

### Implementation Checklist

- [ ] Create 9-box canvas grid component
- [ ] Implement box card component
- [ ] Build edit modal component
- [ ] Create pre-fill service integration
- [ ] Implement validation service integration
- [ ] Add version management functionality
- [ ] Build version comparison view
- [ ] Create canvas database schema
- [ ] Implement save/load functionality
- [ ] Add export functionality (PDF, PNG)
- [ ] Test responsive layouts
- [ ] Verify AI agent integrations

---

**Status:** Ready for Implementation  
**Related Prompts:** 05-ai-agents-modules-workflows.md, 30-content-generation.md, 32-insights-extraction.md
