# Core Prompt 37 ‚Äî Discovery Screen Design

**Purpose:** Define the luxury, premium discovery search screen with wireframe, content, data, features, and AI prospect matching integration

**Phase:** 4 (Production)  
**Screen:** Discovery Page  
**AI Agent:** DiscoveryMatcher

---

## Screen Overview

The discovery screen provides founders with an intelligent, AI-powered prospect search capability that finds ideal investors, customers, and partners using natural language queries and Google Search. The screen displays scored prospects with detailed reasoning, enabling founders to quickly identify and add high-fit prospects to their CRM pipeline.

---

## Wireframe Layout

### 3-Panel Structure

**Left Panel - Context:**
- Navigation menu (Dashboard, Projects, Deals, Contacts, Tasks, **Discovery**, Documents, Strategy)
- Recent searches
  - List of last 5 search queries
  - Click to re-run search
- Search filters (when results shown)
  - Prospect type (Investor, Customer, Partner, Advisor)
  - Location filter
  - Stage preference
  - Fit score threshold

**Main Panel - Work:**
- Header with search input
  - Large search bar with placeholder: "üîç Find seed VCs in AI developer tools"
  - "Search" button
  - Advanced filters toggle
- Search results display
  - Results count: "47 found | 12 high fit"
  - Sort options (Fit Score, Relevance, Recent Activity)
  - Prospect cards with:
    - Prospect name and title
    - Organization/firm name
    - Fit score badge (color-coded)
    - Key signals (why they match)
    - Recent activity/context
    - Contact links (LinkedIn, website)
    - "+ Add to CRM" button
- Empty state (before search)
- Loading state (during search)
- No results state

**Right Panel - Intelligence:**
- Search AI Panel (during/after search)
  - Query interpretation (how AI understood the query)
  - Search strategy summary
  - Total found count
  - High fit count
  - Search sources used
- Selected Prospect Panel (when prospect selected)
  - Prospect details
  - Fit score with breakdown
  - Match reasoning (why this score)
  - Key signals explanation
  - Comparison with startup profile
  - Suggested next actions
- AI Insights (when no search)
  - "Search for investors to build pipeline"
  - "Find customers matching your ideal profile"
  - Recent successful searches (from other users, anonymized)

---

## Content Specifications

### Search Input

**Natural Language Query:**
- Examples:
  - "Seed VCs in AI developer tools"
  - "B2B SaaS customers in healthcare"
  - "Partners for API integrations"
  - "Advisors with enterprise sales experience"
- Auto-suggestions based on startup profile
- Query history (recent searches)

**Advanced Filters (Expandable):**
- Prospect type (Investor, Customer, Partner, Advisor)
- Location (City, Region, Country)
- Stage preference (Seed, Series A, Growth)
- Check size (for investors)
- Industry focus
- Company size (for customers)

### Prospect Card Information

**Card Header:**
- Prospect name and title
- Organization/firm name
- Fit score badge (large, color-coded: üü¢ 90-100%, üü° 70-89%, üî¥ <70%)

**Card Body:**
- Key signals (bulleted list):
  - "AI/ML focus" 
  - "Seed stage investor"
  - "Recent B2B SaaS investment"
  - "SF-based, accessible"
- Recent activity/context:
  - "Recently invested in Similar.ai"
  - "Wrote article about developer tools"
  - "Active on Twitter discussing AI"
- Location and accessibility

**Card Footer:**
- Contact links:
  - LinkedIn profile
  - Company website
  - Email (if public)
- "+ Add to CRM" button (creates contact + deal)
- "View Details" link (expands card)

### Fit Score Display

**Score Badge:**
- Large percentage (e.g., "95%")
- Color coding:
  - üü¢ Green: 90-100% (Excellent fit)
  - üü° Yellow: 70-89% (Strong fit)
  - üü† Orange: 50-69% (Moderate fit)
  - üî¥ Red: 0-49% (Weak fit)

**Score Breakdown (in right panel):**
- Stage Fit: 25% (do they invest/work at this stage?)
- Sector Fit: 25% (does their focus match industry?)
- Size Fit: 15% (does deal size/company size match?)
- Location Fit: 15% (geographic alignment)
- Recency: 10% (are they actively investing/buying?)
- Accessibility: 10% (can founder reach them?)

**Match Reasoning:**
- Detailed explanation of score
- Specific signals that contributed
- Comparison with startup profile
- What makes them a good/bad fit

---

## Features

### Natural Language Search

**Query Parsing:**
- Understands natural language queries
- Extracts:
  - Target type (investor, customer, partner)
  - Criteria (stage, sector, location, size)
  - Implicit filters (from startup context)

**Query Interpretation:**
- Display how AI understood the query
- Show parsed criteria
- Confirm search strategy

**Query History:**
- Save recent searches
- Quick re-run of previous searches
- Search templates (common queries)

### Prospect Matching

**AI Scoring:**
- DiscoveryMatcher uses Google Search + Thinking Mode
- Scores each prospect (0-100%)
- Provides detailed reasoning
- Cites sources for context

**Fit Analysis:**
- Stage alignment
- Sector focus match
- Deal size compatibility
- Geographic fit
- Recency of activity
- Accessibility assessment

**Batch Operations:**
- "Add all high fit" (adds prospects ‚â•70% fit)
- "Add selected" (adds checked prospects)
- Bulk import to CRM

### Search Results

**Sorting Options:**
- By fit score (highest first)
- By relevance
- By recent activity
- By location (nearest first)

**Filtering:**
- Filter by fit score threshold (‚â•70%, ‚â•80%, etc.)
- Filter by prospect type
- Filter by location
- Combine multiple filters

**Pagination:**
- Show 20 prospects per page
- Load more button
- Total count display

---

## AI Agent Integration

### DiscoveryMatcher

**Trigger Points:**
- User submits search query
- User clicks recent search to re-run
- User applies filters (re-searches with filters)

**Workflow:**
1. User enters natural language query
2. DiscoveryMatcher parses query
3. Google Search executed for prospects
4. Results retrieved with sources
5. AI scores each prospect using Thinking Mode
6. Results displayed with scores and reasoning
7. User reviews and adds prospects to CRM

**Query Parsing:**
- Extract target type (investor, customer, partner)
- Extract criteria (stage, sector, location, size)
- Infer implicit filters from startup context
- Build search strategy

**Search Execution:**
- Primary search for target type
- Portfolio search (find firms by investments)
- Content search (find people writing about topics)
- Multiple searches for comprehensive results

**Prospect Scoring:**
- Use Thinking Mode (high) for deep evaluation
- Score each prospect on 6 factors
- Provide detailed reasoning
- Cite sources for signals

**Output Format:**
- Query interpretation (how query was understood)
- Total found count
- Prospects array (up to 50):
  - Name, type, title, organization
  - Fit score (0-100)
  - Fit reasoning (detailed explanation)
  - Key signals (what made them relevant)
  - Source URLs
  - Contact URLs
- Search sources (Google Search queries used)
- Filters applied

**Configuration:**
- Model: `gemini-3-pro-preview`
- Thinking Mode: `high` (for scoring reasoning)
- Tools: Google Search Grounding
- Structured Output: JSON schema for prospects
- Execution: Async (may take 30s - 2min)

---

## User Journey

### Journey: Search ‚Üí Review ‚Üí Add to CRM

**Step 1: Enter Search Query**
- User navigates to Discovery page
- User types natural language query: "Seed VCs in AI developer tools"
- User clicks "Search" or presses Enter

**Step 2: AI Search and Scoring**
- DiscoveryMatcher parses query
- Google Search executed (may take 30-60 seconds)
- Prospects retrieved from search results
- AI scores each prospect with Thinking Mode
- Loading state shown with progress

**Step 3: Review Results**
- Results displayed with fit scores
- User reviews top prospects
- User clicks prospect to see detailed reasoning
- Right panel shows match breakdown

**Step 4: Add Prospects**
- User selects high-fit prospects
- User clicks "+ Add to CRM" on prospect card
- Or user clicks "Add all high fit" (bulk action)
- Prospects added as contacts
- Deals created automatically (optional)

**Step 5: Track in Pipeline**
- Added prospects appear in Contacts
- Created deals appear in Deals pipeline
- Navigation to Deals page to review

---

## Workflows

### Workflow 1: Natural Language Search ‚Üí Scoring ‚Üí Add

**User Actions:**
1. Enter query: "Seed VCs in AI developer tools"
2. Click "Search"
3. Review results with scores
4. Select prospects to add
5. Click "+ Add to CRM"

**System Actions:**
1. Parse query with DiscoveryMatcher
2. Execute Google Search
3. Score prospects with Thinking Mode
4. Display results with reasoning
5. Create contacts and deals on add

**AI Agent:**
- DiscoveryMatcher (gemini-3-pro-preview)
- Edge action: `research_topic`
- Tools: Google Search Grounding, Thinking Mode (high)
- Execution: Async, 30s-2min

**Data Flow:**
- User Query ‚Üí DiscoveryMatcher ‚Üí Google Search ‚Üí Scoring ‚Üí Results ‚Üí User Selection ‚Üí CRM

---

### Workflow 2: Filter ‚Üí Re-search ‚Üí Refine

**User Actions:**
1. Initial search returns 47 results
2. Apply filter: "Fit score ‚â• 80%"
3. Apply location filter: "Bay Area"
4. Review refined results

**System Actions:**
1. Filter existing results
2. Or re-search with filters
3. Update results display
4. Maintain search history

---

### Workflow 3: Recent Search ‚Üí Re-run ‚Üí Compare

**User Actions:**
1. Click recent search from left panel
2. Re-run same search
3. Compare new results with previous

**System Actions:**
1. Load previous query
2. Execute search again
3. Display new results
4. Highlight new prospects (if any)

---

## Data Specifications

### Data Sources

**External Sources (via Google Search):**
- Investor databases
- Company websites
- LinkedIn profiles
- News articles
- Investment announcements
- Industry publications

**Internal Data (for scoring context):**
- `startups` - Startup profile (industry, stage, location)
- `contacts` - Existing contacts (exclusion list)
- `deals` - Existing deals (avoid duplicates)

**Prospect Data (from DiscoveryMatcher):**
- name (string)
- type (enum: investor, customer, partner, advisor)
- title (string)
- organization (string)
- fit_score (integer, 0-100)
- fit_reasoning (string, detailed explanation)
- key_signals (array of strings)
- source_url (string, where found)
- contact_url (string, LinkedIn or website)
- recent_activity (string, context from search)

**Search Metadata:**
- query_interpretation (how query was understood)
- total_found (number of prospects found)
- search_sources (array of Google Search queries)
- filters_applied (what filters were used)
- search_timestamp (when search was performed)

---

## Frontend Backend Wiring

### State Management

**React Query Hooks:**
- `useDiscoverySearch(query, filters)` - Execute search mutation
- `useSearchResults(sessionId)` - Fetch search results (async)
- `useRecentSearches()` - Fetch search history
- `useAddProspectsToCRM()` - Bulk add prospects mutation

**Local State:**
- Search query input
- Active filters
- Selected prospects (for bulk add)
- Search session ID (for async results)
- Results pagination state

### API Integration

**Discovery Service:**
- `searchProspects(query, filters)` - Start async search
  - Returns session ID immediately
  - Search continues in background
- `getSearchResults(sessionId)` - Poll for results
  - Returns results when ready
  - Status: searching, completed, failed
- `getRecentSearches()` - Fetch search history
- `addProspectsToCRM(prospectIds)` - Bulk create contacts/deals

**AI Service:**
- DiscoveryMatcher agent called via edge function
- Edge action: `research_topic`
- Async execution (returns session ID)
- Results streamed or polled

**Data Service:**
- `supabase.from('contacts').insert()` - Create contacts from prospects
- `supabase.from('deals').insert()` - Create deals from prospects
- Search results stored in session (not persisted to DB)

### Async Search Handling

**Search Pattern:**
1. User submits query
2. Frontend calls `searchProspects()` 
3. Returns session ID immediately
4. Frontend polls `getSearchResults(sessionId)` every 2 seconds
5. When results ready, display to user
6. Show loading state with progress during search

**Status Indicators:**
- "Searching..." with progress
- "Found X prospects, scoring..." 
- "Scoring complete, displaying results"
- "Search complete: 47 prospects found"

---

## UI Components

### Search Input Component

**Props:**
- onSearch (callback with query)
- suggestions (array of suggested queries)
- recentSearches (array of recent queries)

**Features:**
- Large, prominent search bar
- Auto-suggestions dropdown
- Recent searches display
- Advanced filters toggle
- Search button with loading state

### Prospect Card Component

**Props:**
- prospect (prospect object)
- onSelect (callback)
- onAddToCRM (callback)
- isSelected (boolean)

**Features:**
- Fit score badge (large, color-coded)
- Key signals display
- Contact links
- "+ Add to CRM" button
- Expandable details

### Search Results Component

**Props:**
- results (array of prospect objects)
- isLoading (boolean)
- onAddProspect (callback)
- onAddAll (callback for bulk)
- filters (active filters)

**Features:**
- Results grid/list
- Sorting controls
- Filter badges
- Pagination
- Empty state
- Loading skeleton

### Fit Score Breakdown Component

**Props:**
- prospect (prospect object)
- score (detailed score object)
- startupProfile (for comparison)

**Features:**
- Score visualization (breakdown chart)
- Factor explanations
- Signal highlights
- Comparison with startup
- Suggested actions

---

## Error Handling

### Search Errors

**Query Too Vague:**
- Show suggestion: "Try a more specific query"
- Provide query examples
- Auto-suggest based on startup profile

**Search Timeout:**
- Show error: "Search taking longer than expected"
- Continue polling (extend timeout)
- Cancel option

**No Results Found:**
- Show empty state with suggestions
- Suggest broader search terms
- Offer to save search for later

**Google Search Failed:**
- Show error: "Could not search the web"
- Retry button
- Fallback to cached results (if available)

### General Errors

**Add to CRM Failed:**
- Show error for specific prospect
- Allow retry for failed adds
- Continue adding other prospects

**Network Error:**
- Show error message
- Retry button
- Offline indicator

---

## Best Practices

### UX Guidelines

**Search Experience:**
- Show progress during long searches (30s-2min)
- Provide query examples and suggestions
- Save search history for quick re-runs
- Clear loading states and status messages

**Results Display:**
- Sort by fit score by default (highest first)
- Highlight high-fit prospects (‚â•80%)
- Show reasoning prominently
- Make it easy to add multiple prospects

**Performance:**
- Async search (don't block UI)
- Progressive result display (show as ready)
- Efficient polling (2s intervals)
- Cache recent search results (temporary)

---

## Integration Points

### With Contacts Screen

**Discovery ‚Üí Contacts:**
- Add prospects creates contacts
- Auto-enriches with extracted data
- Links to deals if deal created

**Contacts ‚Üí Discovery:**
- "Find similar" from contact
- Search for related prospects
- Enrichment suggestions

### With Deals Screen

**Discovery ‚Üí Deals:**
- Add prospect creates contact + deal
- Deal starts in Research stage
- Pre-filled with prospect data

**Deals ‚Üí Discovery:**
- "Find more like this" from deal
- Search for similar investors
- Prospect suggestions based on deal

---

## Responsive Design

### Desktop (‚â•1280px)
- 3-panel layout (240px + flex + 320px)
- Full search results grid
- Right panel shows selected prospect details

### Tablet (768-1279px)
- 2-panel layout (collapsible left + main)
- Right panel as slide-over
- Results grid with 2 columns

### Mobile (<768px)
- Single panel (main only)
- Left panel as hamburger menu
- Stacked prospect cards
- Bottom sheet for right panel

---

The discovery screen provides a luxury, premium, sophisticated, intelligent prospect search experience. The natural language search, AI-powered scoring with detailed reasoning, and seamless CRM integration create a powerful tool that helps founders quickly identify and connect with ideal prospects.

---

**Last Updated:** January 15, 2026  
**Status:** ‚úÖ Complete - Ready for Phase 4 implementation
